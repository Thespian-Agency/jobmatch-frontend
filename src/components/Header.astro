---
import { Image } from "astro:assets";
import Button from "../react/Button";
import { withBase } from "../utils/withBase";
import { getEntry, type CollectionEntry } from "astro:content";

const header = (await getEntry(
  "homepage",
  "-index"
)) as CollectionEntry<"homepage">;
const { links: headerLinks } = header.data.header;
const { buttons } = header.data;
---

<header
  class="flex h-72 px-56 py-16 justify-between items-center sticky top-0 backdrop-blur-xl z-10"
>
  <div class="left-part flex gap-32 items-center">
    <div class="px-24 py-2">
      <a data-id="home" class="cursor-pointer">
        <Image src={withBase("/logo.png")} alt="logo" width={181} height={36} />
      </a>
    </div>
    <nav>
      <ul class="flex gap-24">
        {
          [
            "services",
            "interpretation",
            "advantages",
            "testimonials",
            "process",
            "faq",
          ].map((link) => (
            <li>
              <a
                class="body-m cursor-pointer font-regular text-fg-grey-tertiary"
                data-id={link}
              >
                {headerLinks[link]}
              </a>
            </li>
          ))
        }
      </ul>
    </nav>
  </div>
  <div class="right-part flex gap-12">
    <Button client:visible variant="primary">{buttons["schedule_demo"]}</Button>
    <Button client:visible variant="secondary">{buttons["contact_us"]}</Button>
  </div>
</header>
<script>
  const links = document.querySelectorAll("a");
  links.forEach((link) => {
    link.addEventListener("click", (e) => {
      e.preventDefault();
      const href = link.getAttribute("data-id");
      if (href === "home") {
        window.scrollTo({ top: 0, behavior: "smooth" });
      } else {
        const element = document.querySelector(`#${href}`);
        if (element) {
          element.scrollIntoView({ behavior: "smooth" });
        }
      }
    });
  });
</script>
<style>
  /* Add smooth scrolling behavior to the entire page */
  :global(html) {
    scroll-behavior: smooth;
  }
</style>
